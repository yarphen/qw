<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title></title>
 <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css">
<script>
$(function() {
$( "#taskdate" ).datepicker();
});
</script>
<style>
.footer {
	position: absolute;
	bottom: 2%;
	background-color: red;
	height: 30px;
	width: 90%;
	left: 5%;
}

.mybutton {
	position: relative;
	background-color: blue;
	display: inline-block;
	width: 10%;
	height: 20px;
	margin-left: 30px;
	margin-right: 30px;
	vertical-align: middle;
}

.menucontainer {
	position: absolute;
	background-color: grey;
	height: 30px;
	width: 90%;
	top: 5px;
	left: 5%;
}

.listcontainer {
	
}

.taskeditor {
	background-color: grey;
	position: fixed;
	width: 60%;
	height: 60%;
	top: 20%;
	left: 20%;
	position: fixed;
}

.hidden {
	display: none;
}
</style>
<script>
 function tasktohtml(task){
	
 }
 function moveto(address){
	 history.pushState(new Object(), null, location.protocol+'//'+location.pathname+'?'+address);
	 route(address);
 }
 function route(id){
 	if (localStorage[id]){
 		editdialog(id);
 	}else if (id=='done'){
 		taskload('true');
 	}else if (id=='undone'){
 		taskload('false');
 	}else if (id=='all'){
 		taskload('all');
 	}else if (id=='new'){
 		editdialog(null);
 	}
 }
 function editdialog(id){
 	if (id==null||localStorage[id]==undefined){
 		document.getElementById('taskname').value="";
 		document.getElementById('taskdate').value="";
 		document.getElementById('tasktext').value="";
 		document.getElementById('savebutton').onclick=function(){if (testvalideform(document.getElementById('taskname').value,  document.getElementById('taskdate').value))createtask(document.getElementById('taskname').value, document.getElementById('tasktext').value, document.getElementById('taskdate').value);};
 		document.getElementById('cancelbutton').onclick=function(){editdialog(null);};
 	}else{
 		var task = stringtotask(localStorage[id]);
 		document.getElementById('taskname').value=task.name;
 		document.getElementById('taskdate').value=task.date;
 		document.getElementById('tasktext').value=task.text;
 		document.getElementById('savebutton').onclick=function(){if (testvalideform(document.getElementById('taskname').value,  document.getElementById('taskdate').value))edittask(id, document.getElementById('taskname').value, document.getElementById('tasktext').value, document.getElementById('taskdate').value);};
 		document.getElementById('cancelbutton').onclick=function(){editdialog(id);};
 	}
 }
 function testvalideform(name, date){
	 var test = true;
	if (trim(name).length<3){
		 alert("Too short name!");
		 test=false;
	}
 	if (!testdate(date)){
 		alert("Choose valide date!");
 		test=false;
	}
 	return test;
 }
 function taskload(flag) {
 	var temp = '';
 	var iftrue = false;
	var iffalse = false;
 	if (flag == 'true') {
 		iftrue = true;
 	}
 	if (flag == 'false') {
 		iffalse = true;
 	}
 	if (flag == 'all') {
 		iftrue = true;
 		iffalse = true;
 	}
 	for ( var id in localStorage) {
 		var task = stringtotask(localStorage[id]);
 		if ((task.done&&istrue)||(!task.done&&isfalse))
 			temp = temp + tasktohtml(task);
 	}
 	document.getElementById('mytable').getElementByTagName('tbody')[0].innerHTML=temp;
 }
 function createtask(name, text, date) {
 	var id;
 	do{
 		id = Math.floor(1000000000*Math.random())+'';
 	}while(localStorage[id]);
 	var temp = {};
 	temp.name = name;
 	temp.text = text;
 	temp.dateaslong = date;
 	temp.done = false;
 	localStorage[id]=temp;
 	return id;
 }
 function deletetask(id) {
 	delete(localStorage[id]);
 }
 function edittask(id, name, text, date) {
 	var temp = stringtotask(localStorage[id]);
 	temp.name = name;
 	temp.text = text;
 	temp.dateaslong = date;
 	localStorage[id] = tasktostring(temp);
 }
 function changemarktask(id) {
 	var temp = stringtotask(localStorage[id]);
 	temp.done = !temp.done;
 	localStorage[id] = tasktostring(temp);
 }
 function tasktostring(task) {
 	return myreplaceformat(task.name)+'\n'+myreplaceformat(task.text)+'\n'+myreplaceformat(task.dateaslong)+'\n'+myreplaceformat(task.done);
 }
 function stringtotask(string) {
 	var task = {};
 	var array = string.split('\n');
 	task.name = array[0];
 	task.text = array[1];
 	task.dateaslong = Number(array[2]);
 	task.done = Boolean(array[3]);
 	return task;
 }
 function myreplaceformat(string) {
 	return string.replace('\n', ' ');
 }
</script>
</head>
<body bgcolor="#a7c1de" align='center'>
	<button
		onclick="history.pushState(new Object(), 'page 2', location.protocol+'//'+location.pathname+'?q='+Math.random());">FUCK</button>

	<div class='menucontainer'>
		<div class='mybutton' onclick="moveto('done')">done</div>
		<div class='mybutton' onclick="moveto('undone')">undone</div>
		<div class='mybutton' onclick="moveto('all')">all</div>
		<div class='mybutton' onclick="editdialog(null)">create</div>
	</div>

	<div class="listcontainer">
		<table id='mytable'>
			<tbody>
				<tr>
					
				</tr>
			</tbody>
		</table>
	</div>
	<div class="taskeditor">
		<table width="100%" height="100%">
			<tbody>
				<tr>
					<td colspan="2"><div id=""></div></td>
				</tr>
				<tr>
					<td><input id="taskname" type="text" style="float: left;"></td>
					<td><input id="taskdate" type="text" style="float: right;"></td>
				</tr>
				<tr>
					<td colspan="2"><textarea rows="10" id="tasktext" style="width: 99.5%; height: 100%; resize: none;">
					</textarea></td>
				</tr>
				<tr>
					<td>
						<button id="savebutton"  style="float: left;">SAVE</button>
					</td>
					<td>
						<button id="cancelbutton"  style="float: right;">CANCEL</button>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class='footer'></div>
</body>
</html>
<!-- remixttpid=737d9077f1ecb027449feab53332e2bd1eba8a874b
remixstid=829648341_61f797f5164e3915d2
remixsid=8d24f6e04204a0d2f52238903b2df14a197f8e709bf8d7e9e016c
  -->
